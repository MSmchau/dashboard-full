<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç®€å•è®¤è¯æµ‹è¯•</title>
</head>
<body>
    <h1>ğŸ” è®¤è¯æœºåˆ¶ç®€å•æµ‹è¯•</h1>
    
    <p>æ­£åœ¨æµ‹è¯•è®¤è¯æœºåˆ¶æ˜¯å¦æ­£å¸¸å·¥ä½œ...</p>
    
    <script>
        console.log('=== è®¤è¯æœºåˆ¶æµ‹è¯•å¼€å§‹ ===');
        
        // 1. æ£€æŸ¥åˆå§‹çŠ¶æ€
        console.log('1. æ£€æŸ¥localStorageçŠ¶æ€:');
        console.log('- token:', localStorage.getItem('token') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
        console.log('- user:', localStorage.getItem('user') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
        
        // 2. å°è¯•ç›´æ¥è®¿é—®è®¾å¤‡ç›‘æ§é¡µé¢
        console.log('2. å°è¯•è®¿é—®è®¾å¤‡ç›‘æ§é¡µé¢...');
        const startTime = Date.now();
        
        fetch('http://localhost:3000/device-monitor')
            .then(response => {
                const endTime = Date.now();
                console.log(`3. å“åº”æ—¶é—´: ${endTime - startTime}ms`);
                console.log('4. å“åº”çŠ¶æ€:', response.status);
                console.log('5. å“åº”URL:', response.url);
                console.log('6. æ˜¯å¦è¢«é‡å®šå‘:', response.redirected);
                
                if (response.url.includes('/login')) {
                    console.log('âœ… æˆåŠŸï¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œè·¯ç”±å®ˆå«æ­£å¸¸å·¥ä½œï¼');
                } else if (response.status === 200) {
                    console.log('âŒ å¤±è´¥ï¼šç›´æ¥è®¿é—®æˆåŠŸï¼Œæ²¡æœ‰é‡å®šå‘åˆ°ç™»å½•é¡µé¢');
                } else {
                    console.log('âš ï¸  å¼‚å¸¸ï¼šçŠ¶æ€ç ', response.status);
                }
            })
            .catch(error => {
                console.error('âŒ ç½‘ç»œé”™è¯¯:', error);
            });
        
        // 3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰è·¯ç”±å®ˆå«çš„æ¶ˆæ¯
        console.log('7. ç­‰å¾…3ç§’æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º...');
        
        setTimeout(() => {
            console.log('=== æ£€æŸ¥å®Œæˆ ===');
            if (window.console.logs) {
                console.log('æ”¶é›†åˆ°çš„æ§åˆ¶å°è¾“å‡º:', window.console.logs);
            }
        }, 3000);
        
        // ç›‘å¬æ§åˆ¶å°è¾“å‡º
        const originalLog = console.log;
        window.console.logs = [];
        console.log = function(...args) {
            window.console.logs.push(args.join(' '));
            originalLog.apply(console, args);
        };
    </script>
</body>
</html>